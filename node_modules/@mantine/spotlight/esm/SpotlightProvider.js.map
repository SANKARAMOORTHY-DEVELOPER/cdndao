{"version":3,"file":"SpotlightProvider.js","sources":["../src/SpotlightProvider.tsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { useDidUpdate, useDisclosure } from '@mantine/hooks';\nimport { useActionsState } from './use-actions-state/use-actions-state';\nimport { useSpotlightShortcuts } from './use-spotlight-shortcuts/use-spotlight-shortcuts';\nimport { Spotlight, InnerSpotlightProps } from './Spotlight/Spotlight';\nimport { useSpotlightEvents } from './events';\nimport type { SpotlightAction } from './types';\nimport { SpotlightContext } from './Spotlight.context';\n\nexport interface SpotlightProviderProps extends InnerSpotlightProps {\n  /** Actions list */\n  actions: SpotlightAction[] | ((query: string) => SpotlightAction[]);\n\n  /** Your application */\n  children?: React.ReactNode;\n\n  /** Called when spotlight opens */\n  onSpotlightOpen?(): void;\n\n  /** Called when spotlight closes */\n  onSpotlightClose?(): void;\n\n  /** Called when user enters text in search input */\n  onQueryChange?(query: string): void;\n\n  /** Keyboard shortcut or list of shortcuts to trigger spotlight */\n  shortcut?: string | string[] | null;\n\n  /** Should search be cleared when spotlight closes */\n  cleanQueryOnClose?: boolean;\n}\n\nexport function SpotlightProvider({\n  actions: initialActions,\n  children,\n  shortcut = 'mod + K',\n  onSpotlightClose,\n  onSpotlightOpen,\n  onQueryChange,\n  cleanQueryOnClose = true,\n  transitionDuration = 150,\n  ...others\n}: SpotlightProviderProps) {\n  const timeoutRef = useRef<number>(-1);\n  const [query, setQuery] = useState('');\n  const [actions, { registerActions, updateActions, removeActions, triggerAction }] =\n    useActionsState(initialActions, query);\n\n  useDidUpdate(() => {\n    updateActions(initialActions);\n  }, [initialActions]);\n\n  const handleQueryChange = (value: string) => {\n    setQuery(value);\n    onQueryChange?.(value);\n  };\n\n  const [opened, { open, close, toggle }] = useDisclosure(false, {\n    onClose: () => {\n      onSpotlightClose?.();\n      if (cleanQueryOnClose) {\n        timeoutRef.current = window.setTimeout(() => {\n          handleQueryChange('');\n        }, transitionDuration);\n      }\n    },\n    onOpen: () => {\n      onSpotlightOpen?.();\n      window.clearTimeout(timeoutRef.current);\n    },\n  });\n\n  const ctx = {\n    openSpotlight: open,\n    closeSpotlight: close,\n    toggleSpotlight: toggle,\n    registerActions,\n    removeActions,\n    triggerAction,\n    opened,\n    actions,\n    query,\n  };\n\n  useSpotlightShortcuts(shortcut, open);\n  useSpotlightEvents(ctx);\n\n  return (\n    <SpotlightContext.Provider value={ctx}>\n      <Spotlight\n        actions={actions}\n        onClose={close}\n        opened={opened}\n        query={query}\n        onQueryChange={handleQueryChange}\n        transitionDuration={transitionDuration}\n        {...others}\n      />\n      {children}\n    </SpotlightContext.Provider>\n  );\n}\n\nSpotlightProvider.displayName = '@mantine/spotlight/SpotlightProvider';\n"],"names":[],"mappings":"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"}