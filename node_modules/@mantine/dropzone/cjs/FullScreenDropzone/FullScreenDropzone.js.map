{"version":3,"file":"FullScreenDropzone.js","sources":["../../src/FullScreenDropzone/FullScreenDropzone.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  Portal,\n  Transition,\n  MantineNumberSize,\n  ClassNames,\n  DefaultProps,\n  Box,\n  useMantineDefaultProps,\n} from '@mantine/core';\nimport { useIsomorphicEffect } from '@mantine/hooks';\nimport { DropzoneStatus } from '../Dropzone';\nimport useStyles from './FullscreenDropzone.styles';\n\nexport type FullScreenDropzoneStylesNames = ClassNames<typeof useStyles>;\n\nexport interface FullScreenDropzoneProps\n  extends DefaultProps<FullScreenDropzoneStylesNames>,\n    Omit<React.ComponentPropsWithoutRef<'div'>, 'onDrop'> {\n  /** Space between dropzone and viewport edges */\n  offset?: MantineNumberSize;\n\n  /** Overlay z-index */\n  zIndex?: number;\n\n  /** Disable dropzone */\n  disabled?: boolean;\n\n  /** Accepted mime types */\n  accept: string[];\n\n  /** Dropzone padding from theme or number to set padding in px */\n  padding?: MantineNumberSize;\n\n  /** Dropzone radius from theme or number to set border-radius in px */\n  radius?: MantineNumberSize;\n\n  /** Called when files are dropped to document */\n  onDrop(files: File[]): void;\n\n  /** Render children based on dragging state */\n  children(status: DropzoneStatus): React.ReactNode;\n}\n\nfunction isVisible(event: DragEvent) {\n  for (let i = 0; i < event.dataTransfer.items.length; i += 1) {\n    if (event.dataTransfer.items[i].kind !== 'file') {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isValidDrop(event: DragEvent, mime: string[]) {\n  const items = event?.dataTransfer?.items;\n\n  if (mime.includes('*')) {\n    return true;\n  }\n\n  for (let i = 0; i < items?.length; i += 1) {\n    if (!mime.includes(items[i].type)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nconst defaultProps: Partial<FullScreenDropzoneProps> = {\n  offset: 'xl',\n  padding: 'md',\n  accept: ['*'],\n  zIndex: 1000,\n};\n\nexport function FullScreenDropzone(props: FullScreenDropzoneProps) {\n  const {\n    className,\n    style,\n    offset,\n    padding,\n    radius,\n    classNames,\n    styles,\n    disabled,\n    accept,\n    zIndex,\n    onDrop,\n    children,\n    ...others\n  } = useMantineDefaultProps('FullScreenDropzone', defaultProps, props);\n\n  const { classes, cx } = useStyles(\n    { offset, padding, radius },\n    { classNames, styles, name: 'FullScreenDropzone' }\n  );\n  const [visible, setVisible] = useState(false);\n  const [error, setError] = useState(false);\n\n  const handleDragOver = (event: DragEvent) => {\n    event.preventDefault();\n    setError(!isValidDrop(event, accept));\n    setVisible(isVisible(event));\n  };\n\n  const handleDragLeave = (event: DragEvent) => {\n    event.preventDefault();\n    setVisible(false);\n  };\n\n  const handleDrop = (event: DragEvent) => {\n    event.stopPropagation();\n    event.preventDefault();\n    setVisible(false);\n    if (isValidDrop(event, accept)) {\n      onDrop(Array.from(event.dataTransfer.files));\n    }\n  };\n\n  useIsomorphicEffect(() => {\n    if (!disabled) {\n      document.addEventListener('dragover', handleDragOver, false);\n      document.addEventListener('dragleave', handleDragLeave, false);\n      document.addEventListener('drop', handleDrop, false);\n\n      return () => {\n        document.removeEventListener('dragover', handleDragOver, false);\n        document.removeEventListener('dragleave', handleDragLeave, false);\n        document.removeEventListener('drop', handleDrop, false);\n      };\n    }\n\n    return undefined;\n  }, [disabled]);\n\n  return (\n    <Portal zIndex={zIndex}>\n      <Transition\n        transition=\"fade\"\n        duration={200}\n        timingFunction=\"ease\"\n        mounted={visible && !disabled}\n      >\n        {(transitionStyles) => (\n          <Box\n            style={{ ...style, ...transitionStyles }}\n            className={cx(classes.root, className)}\n            {...others}\n          >\n            <div\n              className={cx(\n                classes.dropzone,\n                {\n                  [classes.active]: visible && !error,\n                  [classes.reject]: error,\n                },\n                className\n              )}\n            >\n              {children({ accepted: visible && !error, rejected: error })}\n            </div>\n          </Box>\n        )}\n      </Transition>\n    </Portal>\n  );\n}\n\nFullScreenDropzone.displayName = '@mantine/dropzone/FullScreenDropzone';\n"],"names":["useMantineDefaultProps","useStyles","useState","useIsomorphicEffect","React","Portal","Transition","Box"],"mappings":"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"}